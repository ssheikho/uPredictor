#--- Choose a sensor

SET(SENSOR_DEPTHSENSEGRABBER 0 CACHE BOOL "Use SoftKinetic with DepthSenseGrabber")
SET(SENSOR_SOFTKIN 0 CACHE BOOL "Use SoftKinetic with SoftKin")
SET(SENSOR_REALSENSE 0 CACHE BOOL "Use Intel RealSense")
SET(SENSOR_OPENNI 0 CACHE BOOL "Use PrimeSense Carmine or ASUS Xtion with OpenNI")

SET(SENSOR_COUNT 0)

macro(SENSOR_RESET SENSOR_1 SENSOR_2)
    UNSET(SENSOR_DEPTHSENSEGRABBER CACHE)
    UNSET(SENSOR_SOFTKIN CACHE)
    UNSET(SENSOR_REALSENSE CACHE)
    UNSET(SENSOR_OPENNI CACHE)
    message(FATAL_ERROR "Sensor conflict: both ${SENSOR_1} and ${SENSOR_2} are set to enabled. Resetting cache, please run cmake and choose a sensor again.")
endmacro(SENSOR_RESET)

if (SENSOR_DEPTHSENSEGRABBER)
    set (SENSOR_TEST DEPTHSENSEGRABBER)
    if (SENSOR_COUNT EQUAL 0)
        set(SENSOR_COUNT 1)
        set(SENSOR_TYPE ${SENSOR_TEST})
        message(STATUS "Enabling ${SENSOR_TEST}")
    else (SENSOR_COUNT EQUAL 0)
        SENSOR_RESET(${SENSOR_TYPE} ${SENSOR_TEST})
    endif (SENSOR_COUNT EQUAL 0)
endif (SENSOR_DEPTHSENSEGRABBER)

if (SENSOR_SOFTKIN)
    set (SENSOR_TEST SOFTKIN)
    if (SENSOR_COUNT EQUAL 0)
        set(SENSOR_COUNT 1)
        set(SENSOR_TYPE ${SENSOR_TEST})
        message(STATUS "Enabling ${SENSOR_TEST}")
    else (SENSOR_COUNT EQUAL 0)
        SENSOR_RESET(${SENSOR_TYPE} ${SENSOR_TEST})
    endif (SENSOR_COUNT EQUAL 0)
endif (SENSOR_SOFTKIN)

if (SENSOR_REALSENSE)
    set (SENSOR_TEST REALSENSE)
    if (SENSOR_COUNT EQUAL 0)
        set(SENSOR_COUNT 1)
        set(SENSOR_TYPE ${SENSOR_TEST})
        message(STATUS "Enabling ${SENSOR_TEST}")
    else (SENSOR_COUNT EQUAL 0)
        SENSOR_RESET(${SENSOR_TYPE} ${SENSOR_TEST})
    endif (SENSOR_COUNT EQUAL 0)
endif (SENSOR_REALSENSE)

if (SENSOR_OPENNI)
    set (SENSOR_TEST OPENNI)
    if (SENSOR_COUNT EQUAL 0)
        set(SENSOR_COUNT 1)
        set(SENSOR_TYPE ${SENSOR_TEST})
        message(STATUS "Enabling ${SENSOR_TEST}")
    else (SENSOR_COUNT EQUAL 0)
        SENSOR_RESET(${SENSOR_TYPE} ${SENSOR_TEST})
    endif (SENSOR_COUNT EQUAL 0)
endif (SENSOR_OPENNI)

if (NOT SENSOR_COUNT)
    message(FATAL_ERROR "Please choose a sensor, example: cmake -D SENSOR_OPENNI=1 (valid options: SENSOR_DEPTHSENSEGRABBER, SENSOR_OPENNI, SENSOR_REALSENSE, SENSOR_SOFTKIN), or use cmake-gui")
endif (NOT SENSOR_COUNT)

set(DEFINITION_SENSOR "-D${SENSOR_TYPE}")
